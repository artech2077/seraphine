# Story 1.1: Next.js + Convex Baseline

## Status
Approved

## Story
**As a** founding engineer,
**I want** to scaffold the Next.js and Convex baseline with shared tooling,
**so that** future stories can extend a production-ready foundation without rework.

## Acceptance Criteria
1. Initialize a Next.js 14 app with pnpm, ESLint, and TypeScript configured.
2. Connect Convex client/server, including schemas for products, sales events, AI insights, and feedback notes.
3. Implement lint and unit test suites with sample tests for Convex actions and React components.

## Tasks / Subtasks
- [ ] Task 1 (AC: 1) Scaffold pnpm workspace and Next.js App Router application
  - [ ] Create root `package.json`, `pnpm-workspace.yaml`, `turbo.json`, and `apps/web` Next.js 14 project aligned to the documented structure. [Source: docs/architecture.md#repository-structure]
  - [ ] Configure TypeScript, Tailwind, shadcn/ui, and ESLint baselines used across the stack. [Source: docs/architecture.md#tech-stack]
  - [ ] Scaffold `packages/ui` workspace placeholder configured for Tailwind and shadcn/ui extensions shared across modules. [Source: docs/architecture.md#component-organization]
  - [ ] Bootstrap the App Router layout with Clerk provider wrapper, navigation shell, and module folders for Dashboard, POS, and Settings features. [Source: docs/architecture.md#component-organization]
- [ ] Task 2 (AC: 2) Establish Convex backend integration
  - [ ] Initialize Convex project, generate client, and wire `ConvexReactClient` provider inside the app shell. [Source: docs/architecture.md#function-organization]
  - [ ] Implement initial Convex schema with products, sales, insights, and feedback collections plus required indexes. [Source: docs/architecture.md#schema-design-convex]
- [ ] Task 3 (AC: 2) Prepare shared domain packages
  - [ ] Add `packages/shared` for Zod schemas and `packages/convex` for functions that consume them, ensuring single source of truth. [Source: docs/architecture.md#coding-standards]
  - [ ] Wire `requireRole` helper and Clerk identity plumbing to Convex mutations so later stories can enforce roles. [Source: docs/architecture.md#authentication-architecture]
- [ ] Task 4 (AC: 3) Implement linting and testing foundations
  - [ ] Configure Vitest + Testing Library for React unit tests under `apps/web/tests` with a sample component test. [Source: docs/architecture.md#testing-strategy]
  - [ ] Configure Vitest for Convex unit tests under `packages/convex/tests` with a sample mutation test invoking generated client helpers. [Source: docs/architecture.md#testing-strategy]
  - [ ] Add Playwright scaffolding and placeholder POS flow spec plus `pnpm lint`, `pnpm test`, and `pnpm test:e2e` scripts in root. [Source: docs/architecture.md#development-commands]
  - [ ] Wire the accessibility suite with `pnpm test:a11y` script and placeholder checks aligned to the layered testing strategy. [Source: docs/architecture.md#testing-strategy]

## Dev Notes
### Previous Story Insights
No prior Seraphine stories exist; no historical implementation notes to carry forward.

### Data Models
- Convex collections for products, sales, insights, feedback, and user profiles must be defined exactly as documented to satisfy downstream workflows. [Source: docs/architecture.md#product] [Source: docs/architecture.md#saleevent] [Source: docs/architecture.md#aiinsight] [Source: docs/architecture.md#feedbacksubmission]

### API Specifications
- Expose Convex mutations/queries (`sales.createSale`, `products.createOrUpdate`, etc.) through generated APIs so Next.js server actions can consume them immediately after scaffolding. [Source: docs/architecture.md#api-specification]

### Component Specifications
- Bootstrap the App Router layout with Clerk provider, navigation shell, and module folders under `apps/web` to house future dashboard, POS, and settings modules. [Source: docs/architecture.md#component-organization]

### File Locations
- Create the monorepo layout with `apps/web`, `packages/convex`, `packages/shared`, `packages/ui`, `tooling/playwright`, and supporting configs to match the mandated source tree. [Source: docs/architecture.md#repository-structure]

### Testing Requirements
- Place React unit/integration tests in `apps/web/tests`, Convex tests in `packages/convex/tests`, and Playwright specs in `apps/web/tests-e2e`, wiring scripts `pnpm test`, `pnpm test:e2e`, and `pnpm test:a11y`. [Source: docs/architecture.md#testing-strategy]

### Technical Constraints
- Enforce security/performance baselines from the start (Clerk-secured auth, HTTPS endpoints, bundle targets <220 KB gzipped, Convex indexes) while respecting CSP and rate-limiting guidance. [Source: docs/architecture.md#security-and-performance]
- Keep shared schemas in `packages/shared` and route all Convex access through generated clients to maintain coding standards. [Source: docs/architecture.md#coding-standards]

### Project Structure Notes
- Architecture expects the monorepo directories outlined in Source Tree, but the current repository only contains documentation folders; completing this story requires creating the `apps/`, `packages/`, `tooling/`, and config files to align with the prescribed structure. [Source: docs/architecture.md#repository-structure]

### Testing
- Follow the layered testing strategy (unit, integration, E2E, accessibility) and wire placeholder specs so CI can execute `pnpm lint`, `pnpm test`, `pnpm test:e2e`, and `pnpm test:a11y` as documented. [Source: docs/architecture.md#testing-strategy] [Source: docs/architecture.md#development-commands]

## Change Log
| Date       | Version | Description          | Author        |
|------------|---------|----------------------|---------------|
| 2025-10-29 | 0.1     | Initial draft created | Scrum Master |

## Dev Agent Record
### Agent Model Used

### Debug Log References

### Completion Notes List

### File List

## QA Results
